general:
  branches:
    ignore:
      - master

machine:
  services:
    - docker

dependencies:
  override:
    - make install-deps-and-build-binary

test:
  override:
    - make test-ci

deployment:
  feature-branch:
    branch: /^((?!master).)*$/
    commands:
      - make check-version
  hub:
    tag: /[0-9]+\.[0-9]+\.[0-9]+/
    commands:
      - make deploy
